language: cpp

os:
        - linux
        - osx

compiler:
        - gcc
        - clang

sudo: required

dist: trusty

before_install:
        - |
          if [[ "$TRAVIS_OS_NAME" == "linux" ]]
          then
            sudo add-apt-repository ppa:librepilot/tools -y
            sudo apt-get update -q
            sudo apt-get install -y libc6-i386 libudev-dev libusb-1.0-0-dev libsdl1.2-dev python libopenscenegraph-dev libosgearth-dev qt56-meta-minimal qt56svg qt56script qt56serialport qt56multimedia qt56translations qt56tools
            make build_sdk_install
          fi

        - |
          if [[ "$TRAVIS_OS_NAME" == "osx" ]]
          then
            brew update
            brew install curl
            brew install p7zip
            brew install gnu-tar
            brew install cmake
            brew install gdal
            brew install geos
            brew install sdl sdl_image sdl_mixer
            sdl-config --version
            make all_sdk_install
          fi



script:
        - make config_new CCACHE=ccache
        - make all_flight
        - make fw_resource
        - make gcs

git:
        depth: 500

cache: ccache
